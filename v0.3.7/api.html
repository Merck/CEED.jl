<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API Documentation · CEEDesigns.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">CEEDesigns.jl</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">CEEDesigns.jl: Overview</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="tutorials/SimpleStatic.html">Static Experimental Designs</a></li><li><a class="tocitem" href="tutorials/SimpleGenerative.html">Generative Experimental Designs</a></li><li><a class="tocitem" href="tutorials/StaticDesigns.html">Heart Disease Triage</a></li><li><a class="tocitem" href="tutorials/StaticDesignsFiltration.html">Heart Disease Triage With Early Droupout</a></li><li><a class="tocitem" href="tutorials/GenerativeDesigns.html">Heart Disease Triage Meets Generative Modeling</a></li><li><a class="tocitem" href="tutorials/ActiveSampling.html">Active Sampling for Generative Designs</a></li></ul></li><li class="is-active"><a class="tocitem" href="api.html">API Documentation</a><ul class="internal"><li><a class="tocitem" href="#StaticDesigns"><span><code>StaticDesigns</code></span></a></li><li><a class="tocitem" href="#GenerativeDesigns"><span><code>GenerativeDesigns</code></span></a></li><li><a class="tocitem" href="#Plotting"><span>Plotting</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="api.html">API Documentation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="api.html">API Documentation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Merck/CEEDesigns.jl/blob/main/docs/src/api.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="API-Documentation"><a class="docs-heading-anchor" href="#API-Documentation">API Documentation</a><a id="API-Documentation-1"></a><a class="docs-heading-anchor-permalink" href="#API-Documentation" title="Permalink"></a></h1><h2 id="StaticDesigns"><a class="docs-heading-anchor" href="#StaticDesigns"><code>StaticDesigns</code></a><a id="StaticDesigns-1"></a><a class="docs-heading-anchor-permalink" href="#StaticDesigns" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.StaticDesigns.efficient_designs" href="#CEEDesigns.StaticDesigns.efficient_designs"><code>CEEDesigns.StaticDesigns.efficient_designs</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">efficient_designs(experiments, evals; max_parallel=1, tradeoff=(1, 0), mdp_kwargs=default_mdp_kwargs)</code></pre><p>Return the set of Pareto-efficient experimental designs, given experimental costs, predictive accuracy (loss), and estimated filtration rates for experimental subsets.</p><p><strong>Arguments</strong></p><ul><li><code>experiments</code>: a dictionary containing pairs <code>experiment =&gt; cost (=&gt; features)</code>, where <code>cost</code> can either be scalar cost or a tuple <code>(monetary cost, execution time)</code>.</li><li><code>evals</code>: a dictionary containing pairs <code>experimental subset =&gt; (; predictive loss, filtration)</code>.</li></ul><p><strong>Keyword arguments</strong></p><ul><li><code>parallel</code>: to estimate the execution time of the design, define the number of experiments that can run concurrently. The experiments will subsequently be arranged in descending order based on their individual durations, and they will be then iteratively allocated into consecutive groups that represent parallel experiments.</li><li><code>tradeoff</code>: determines how to project the monetary cost and execution time of an experimental design onto a single combined cost.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">efficient_designs(
    experiments_costs,
    model,
    data[!, Not(&quot;HeartDisease&quot;)],
    data[!, &quot;HeartDisease&quot;];
    eval_options = (; zero_cost_features, measure = LogLoss()),
    arrangement_options = (; max_parallel = 2, tradeoff = (0.0, 1)),
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/StaticDesigns/StaticDesigns.jl#L178-L207">source</a></section><section><div><pre><code class="nohighlight hljs">efficient_designs(experiments, args...; eval_options, arrangement_options)</code></pre><p>Evaluate predictive power for subsets of experiments, and return the set of Pareto-efficient experimental designs.</p><p>Internally, <a href="api.html#CEEDesigns.StaticDesigns.evaluate_experiments"><code>evaluate_experiments</code></a> is called first, followed by <a href="api.html#CEEDesigns.StaticDesigns.efficient_designs"><code>efficient_designs</code></a>.</p><p><strong>Keyword arguments</strong></p><ul><li><code>eval_options</code>: keyword arguments to <a href="api.html#CEEDesigns.StaticDesigns.evaluate_experiments"><code>evaluate_experiments</code></a>.</li><li><code>arrangement_options</code>: keyword arguments to <a href="api.html#CEEDesigns.StaticDesigns.efficient_designs"><code>efficient_designs</code></a>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">efficient_designs(
    experiments_costs,
    data_binary;
    eval_options = (; zero_cost_features),
    arrangement_options = (; max_parallel = 2, tradeoff = (0.0, 1)),
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/StaticDesigns/StaticDesigns.jl#L261-L283">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.StaticDesigns.evaluate_experiments" href="#CEEDesigns.StaticDesigns.evaluate_experiments"><code>CEEDesigns.StaticDesigns.evaluate_experiments</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">evaluate_experiments(experiments, model, X, y; zero_cost_features=[], evaluate_empty_subset=true, return_full_metrics=false, kwargs...)</code></pre><p>Evaluate predictive accuracy over subsets of experiments, and return the metrics. The evaluation is facilitated by <code>MLJ.evaluate</code>; additional keyword arguments to this function will be passed to <code>evaluate</code>.</p><p>Evaluations are run in parallel.</p><p><strong>Arguments</strong></p><ul><li><code>experiments</code>: a dictionary containing pairs <code>experiment =&gt; (cost =&gt;) features</code>, where <code>features</code> is a subset of column names in <code>data</code>.</li><li><code>model</code>: a predictive model whose accuracy will be evaluated.</li><li><code>X</code>: a dataframe with features used for prediction.</li><li><code>y</code>: the variable that we aim to predict.</li></ul><p><strong>Keyword arguments</strong></p><ul><li><code>max_cardinality</code>: maximum cardinality of experimental subsets (defaults to the number of experiments).</li><li><code>zero_cost_features</code>: additional zero-cost features available for each experimental subset (defaults to an empty list).</li><li><code>evaluate_empty_subset</code>: flag indicating whether to evaluate empty experimental subset. A constant column will be added if <code>zero_cost_features</code> is empty (defaults to true).</li><li><code>return_full_metrics</code>: flag indicating whether to return full <code>MLJ.PerformanceEvaluation</code> metrics. Otherwise return an aggregate &quot;measurement&quot; for the first measure (defaults to false).</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">evaluate_experiments(
    experiments,
    model,
    data[!, Not(&quot;HeartDisease&quot;)],
    data[!, &quot;HeartDisease&quot;];
    zero_cost_features,
    measure = LogLoss(),
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/StaticDesigns/StaticDesigns.jl#L28-L61">source</a></section><section><div><pre><code class="nohighlight hljs">evaluate_experiments(experiments, X; zero_cost_features=[], evaluate_empty_subset=true)</code></pre><p>Evaluate discriminative power for subsets of experiments, and return the metrics.</p><p>Evaluations are run in parallel.</p><p><strong>Arguments</strong></p><ul><li><code>experiments</code>: a dictionary containing pairs <code>experiment =&gt; (cost =&gt;) features</code>, where <code>features</code> is a subset of column names in <code>X</code>.</li><li><code>X</code>: a dataframe containing binary labels, where <code>false</code> indicated that an entity was filtered out by the experiment (and should be removed from the triage).</li></ul><p><strong>Keyword arguments</strong></p><ul><li><code>zero_cost_features</code>: additional zero-cost features available for each experimental subset (defaults to an empty list).</li><li><code>evaluate_empty_subset</code>: flag indicating whether to evaluate empty experimental subset.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">evaluate_experiments(experiments, data_binary; zero_cost_features)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/StaticDesigns/StaticDesigns.jl#L118-L140">source</a></section></article><h2 id="GenerativeDesigns"><a class="docs-heading-anchor" href="#GenerativeDesigns"><code>GenerativeDesigns</code></a><a id="GenerativeDesigns-1"></a><a class="docs-heading-anchor-permalink" href="#GenerativeDesigns" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.GenerativeDesigns.UncertaintyReductionMDP" href="#CEEDesigns.GenerativeDesigns.UncertaintyReductionMDP"><code>CEEDesigns.GenerativeDesigns.UncertaintyReductionMDP</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">UncertaintyReductionMDP(costs; sampler, uncertainty, threshold, evidence=Evidence(), &lt;keyword arguments&gt;)</code></pre><p>Structure that parametrizes the experimental decision-making process. It is used in the object interface of POMDPs.</p><p>In this experimental setup, our objective is to minimize the expected experimental cost while ensuring the uncertainty remains below a specified threshold.</p><p>Internally, a state of the decision process is modeled as a tuple <code>(evidence::Evidence, [total accumulated monetary cost, total accumulated execution time])</code>.</p><p><strong>Arguments</strong></p><ul><li><code>costs</code>: a dictionary containing pairs <code>experiment =&gt; cost</code>, where <code>cost</code> can either be a scalar cost (modelled as a monetary cost) or a tuple <code>(monetary cost, execution time)</code>.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>sampler</code>: a function of <code>(evidence, features, rng)</code>, in which <code>evidence</code> denotes the current experimental evidence, <code>features</code> represent the set of features we want to sample from, and <code>rng</code> is a random number generator; it returns a dictionary mapping the features to outcomes.</li><li><code>uncertainty</code>: a function of <code>evidence</code>; it returns the measure of variance or uncertainty about the target variable, conditioned on the experimental evidence acquired so far.</li><li><code>threshold</code>: a number representing the acceptable level of uncertainty about the target variable.</li><li><code>evidence=Evidence()</code>: initial experimental evidence.</li><li><code>costs_tradeoff</code>: tradeoff between monetary cost and execution time of an experimental designs, given as a tuple of floats.</li><li><code>max_parallel</code>: maximum number of parallel experiments.</li><li><code>discount</code>: this is the discounting factor utilized in reward computation.</li><li><code>bigM</code>: it refers to the penalty that arises in a scenario where further experimental action is not an option, yet the uncertainty exceeds the allowable limit.</li><li><code>max_experiments</code>: this denotes the maximum number of experiments that are permissible to be conducted.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/GenerativeDesigns/UncertaintyReductionMDP.jl#L1-L25">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.GenerativeDesigns.EfficientValueMDP" href="#CEEDesigns.GenerativeDesigns.EfficientValueMDP"><code>CEEDesigns.GenerativeDesigns.EfficientValueMDP</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">EfficientValueMDP(costs; sampler, value, evidence=Evidence(), &lt;keyword arguments&gt;)</code></pre><p>Structure that parametrizes the experimental decision-making process. It is used in the object interface of POMDPs.</p><p>In this experimental setup, our objective is to maximize the value of the experimental evidence (such as clinical utility), adjusted for experimental costs.</p><p>Internally, the reward associated with a particular experimental <code>evidence</code> and with total accumulated <code>monetary_cost</code> and (optionally) <code>execution_time</code> is computed as <code>value(evidence) - costs_tradeoff&#39; * [monetary_cost, execution_time]</code>.</p><p><strong>Arguments</strong></p><ul><li><code>costs</code>: a dictionary containing pairs <code>experiment =&gt; cost</code>, where <code>cost</code> can either be a scalar cost (modelled as a monetary cost) or a tuple <code>(monetary cost, execution time)</code>.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>sampler</code>: a function of <code>(evidence, features, rng)</code>, in which <code>evidence</code> denotes the current experimental evidence, <code>features</code> represent the set of features we want to sample from, and <code>rng</code> is a random number generator; it returns a dictionary mapping the features to outcomes.</li><li><code>value</code>: a function of <code>(evidence)</code>; it quantifies the utility of experimental evidence.</li><li><code>evidence=Evidence()</code>: initial experimental evidence.</li><li><code>max_parallel</code>: maximum number of parallel experiments.</li><li><code>discount</code>: this is the discounting factor utilized in reward computation.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/GenerativeDesigns/EfficientValueMDP.jl#L1-L21">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.GenerativeDesigns.State" href="#CEEDesigns.GenerativeDesigns.State"><code>CEEDesigns.GenerativeDesigns.State</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Represent experimental state as a tuple of experimental costs and evidence.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/GenerativeDesigns/GenerativeDesigns.jl#L39-L41">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.GenerativeDesigns.Variance" href="#CEEDesigns.GenerativeDesigns.Variance"><code>CEEDesigns.GenerativeDesigns.Variance</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">Variance()</code></pre><p>Return a function of <code>(data; prior)</code>. When this function is called as part of an instantiation procedure in <a href="api.html#CEEDesigns.GenerativeDesigns.DistanceBased"><code>DistanceBased</code></a>, it returns an internal function of <code>weights</code> that computes the fraction of variance in the data, relative to the variance calculated with respect to a specified <code>prior</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/GenerativeDesigns/distancebased.jl#L46-L51">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.GenerativeDesigns.Entropy" href="#CEEDesigns.GenerativeDesigns.Entropy"><code>CEEDesigns.GenerativeDesigns.Entropy</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">Entropy()</code></pre><p>Return a function of <code>(labels; prior)</code>.  When this function is called as part of an instantiation procedure in <a href="api.html#CEEDesigns.GenerativeDesigns.DistanceBased"><code>DistanceBased</code></a>, it returns an internal function of <code>weights</code> that computes the fraction of information entropy, relative to the entropy calculated with respect to a specified <code>prior</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/GenerativeDesigns/distancebased.jl#L62-L67">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.GenerativeDesigns.efficient_design" href="#CEEDesigns.GenerativeDesigns.efficient_design"><code>CEEDesigns.GenerativeDesigns.efficient_design</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">efficient_design(costs; sampler, uncertainty, threshold, evidence=Evidence(), &lt;keyword arguments&gt;)</code></pre><p>In the uncertainty reduction setup, minimize the expected experimental cost while ensuring the uncertainty remains below a specified threshold.</p><p><strong>Arguments</strong></p><ul><li><code>costs</code>: a dictionary containing pairs <code>experiment =&gt; cost</code>, where <code>cost</code> can either be a scalar cost (modelled as a monetary cost) or a tuple <code>(monetary cost, execution time)</code>.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>sampler</code>: a function of <code>(evidence, features, rng)</code>, in which <code>evidence</code> denotes the current experimental evidence, <code>features</code> represent the set of features we want to sample from, and <code>rng</code> is a random number generator; it returns a dictionary mapping the features to outcomes.</li><li><code>uncertainty</code>: a function of <code>evidence</code>; it returns the measure of variance or uncertainty about the target variable, conditioned on the experimental evidence acquired so far.</li><li><code>threshold</code>: uncertainty threshold.</li><li><code>evidence=Evidence()</code>: initial experimental evidence.</li><li><code>solver=default_solver</code>: a POMDPs.jl compatible solver used to solve the decision process. The default solver is <a href="https://juliapomdp.github.io/MCTS.jl/dev/dpw/"><code>DPWSolver</code></a>.</li><li><code>repetitions=0</code>: number of runoffs used to estimate the expected experimental cost.</li><li><code>mdp_options</code>: a <code>NamedTuple</code> of additional keyword arguments that will be passed to the constructor of <a href="api.html#CEEDesigns.GenerativeDesigns.UncertaintyReductionMDP"><code>UncertaintyReductionMDP</code></a>.</li><li><code>realized_uncertainty=false</code>: whenever the initial state uncertainty is below the selected threshold, return the actual uncertainty of this state.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">(; sampler, uncertainty, weights) = DistanceBased(
    data;
    target = &quot;HeartDisease&quot;,
    uncertainty = Entropy(),
    similarity = Exponential(; λ = 5),
);
# initialize evidence
evidence = Evidence(&quot;Age&quot; =&gt; 35, &quot;Sex&quot; =&gt; &quot;M&quot;)
# set up solver (or use default)
solver = GenerativeDesigns.DPWSolver(; n_iterations = 60_000, tree_in_info = true)
designs = efficient_design(
    costs;
    experiments,
    sampler,
    uncertainty,
    threshold = 0.6,
    evidence,
    solver,            # planner
    mdp_options = (; max_parallel = 1),
    repetitions = 5,
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/GenerativeDesigns/UncertaintyReductionMDP.jl#L161-L206">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.GenerativeDesigns.efficient_designs" href="#CEEDesigns.GenerativeDesigns.efficient_designs"><code>CEEDesigns.GenerativeDesigns.efficient_designs</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">efficient_designs(costs; sampler, uncertainty, thresholds, evidence=Evidence(), &lt;keyword arguments&gt;)</code></pre><p>In the uncertainty reduction setup, minimize the expected experimental resource spend over a range of uncertainty thresholds, and return the set of Pareto-efficient designs in the dimension of cost and uncertainty threshold.</p><p>Internally, an instance of the <code>UncertaintyReductionMDP</code> structure is created for every selected uncertainty threshold and the corresponding runoffs are simulated.</p><p><strong>Arguments</strong></p><ul><li><code>costs</code>: a dictionary containing pairs <code>experiment =&gt; cost</code>, where <code>cost</code> can either be a scalar cost (modelled as a monetary cost) or a tuple <code>(monetary cost, execution time)</code>.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>sampler</code>: a function of <code>(evidence, features, rng)</code>, in which <code>evidence</code> denotes the current experimental evidence, <code>features</code> represent the set of features we want to sample from, and <code>rng</code> is a random number generator; it returns a dictionary mapping the features to outcomes.</li><li><code>uncertainty</code>: a function of <code>evidence</code>; it returns the measure of variance or uncertainty about the target variable, conditioned on the experimental evidence acquired so far.</li><li><code>thresholds</code>: number of thresholds to consider uniformly in the range between 0 and 1, inclusive.</li><li><code>evidence=Evidence()</code>: initial experimental evidence.</li><li><code>solver=default_solver</code>: a POMDPs.jl compatible solver used to solve the decision process. The default solver is <a href="https://juliapomdp.github.io/MCTS.jl/dev/dpw/"><code>DPWSolver</code></a>.</li><li><code>repetitions=0</code>: number of runoffs used to estimate the expected experimental cost.</li><li><code>mdp_options</code>: a <code>NamedTuple</code> of additional keyword arguments that will be passed to the constructor of <a href="api.html#CEEDesigns.GenerativeDesigns.UncertaintyReductionMDP"><code>UncertaintyReductionMDP</code></a>.</li><li><code>realized_uncertainty=false</code>: whenever the initial state uncertainty is below the selected threshold, return the actual uncertainty of this state.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">(; sampler, uncertainty, weights) = DistanceBased(
    data;
    target = &quot;HeartDisease&quot;,
    uncertainty = Entropy(),
    similarity = Exponential(; λ = 5),
);
# initialize evidence
evidence = Evidence(&quot;Age&quot; =&gt; 35, &quot;Sex&quot; =&gt; &quot;M&quot;)
# set up solver (or use default)
solver = GenerativeDesigns.DPWSolver(; n_iterations = 60_000, tree_in_info = true)
designs = efficient_designs(
    costs;
    experiments,
    sampler,
    uncertainty,
    thresholds = 6,
    evidence,
    solver,            # planner
    mdp_options = (; max_parallel = 1),
    repetitions = 5,
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/GenerativeDesigns/UncertaintyReductionMDP.jl#L290-L337">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.GenerativeDesigns.efficient_value" href="#CEEDesigns.GenerativeDesigns.efficient_value"><code>CEEDesigns.GenerativeDesigns.efficient_value</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">efficient_value(costs; sampler, value, evidence=Evidence(), &lt;keyword arguments&gt;)</code></pre><p>Estimate the maximum value of experimental evidence (such as clinical utility), adjusted for experimental costs.</p><p>Internally, an instance of the <code>EfficientValueMDP</code> structure is created and a summary over <code>repetitions</code> runoffs is returned.</p><p><strong>Arguments</strong></p><ul><li><code>costs</code>: a dictionary containing pairs <code>experiment =&gt; cost</code>, where <code>cost</code> can either be a scalar cost (modelled as a monetary cost) or a tuple <code>(monetary cost, execution time)</code>.</li></ul><p><strong>Keyword Arguments</strong></p><ul><li><code>sampler</code>: a function of <code>(evidence, features, rng)</code>, in which <code>evidence</code> denotes the current experimental evidence, <code>features</code> represent the set of features we want to sample from, and <code>rng</code> is a random number generator; it returns a dictionary mapping the features to outcomes.</li><li><code>value</code>: a function of <code>(evidence, (monetary costs, execution time))</code>; it quantifies the utility of experimental evidence.</li><li><code>evidence=Evidence()</code>: initial experimental evidence.</li><li><code>solver=default_solver</code>: a POMDPs.jl compatible solver used to solve the decision process. The default solver is <a href="https://juliapomdp.github.io/MCTS.jl/dev/dpw/"><code>DPWSolver</code></a>.</li><li><code>repetitions=0</code>: number of runoffs used to estimate the expected experimental cost.</li><li><code>mdp_options</code>: a <code>NamedTuple</code> of additional keyword arguments that will be passed to the constructor of <a href="api.html#CEEDesigns.GenerativeDesigns.EfficientValueMDP"><code>EfficientValueMDP</code></a>.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">(; sampler, uncertainty, weights) = DistanceBased(
    data;
    target = &quot;HeartDisease&quot;,
    uncertainty = Entropy(),
    similarity = Exponential(; λ = 5),
);
value = (evidence, costs) -&gt; (1 - uncertainty(evidence) + 0.005 * sum(costs));
# initialize evidence
evidence = Evidence(&quot;Age&quot; =&gt; 35, &quot;Sex&quot; =&gt; &quot;M&quot;)
# set up solver (or use default)
solver =
    GenerativeDesigns.DPWSolver(; n_iterations = 10_000, depth = 3, tree_in_info = true)
design = efficient_value(
    experiments;
    sampler,
    value,
    evidence,
    solver,            # planner
    mdp_options = (; max_parallel = 1),
    repetitions = 5,
)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/GenerativeDesigns/EfficientValueMDP.jl#L116-L161">source</a></section></article><h3 id="Distance-Based-Sampling"><a class="docs-heading-anchor" href="#Distance-Based-Sampling">Distance-Based Sampling</a><a id="Distance-Based-Sampling-1"></a><a class="docs-heading-anchor-permalink" href="#Distance-Based-Sampling" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.GenerativeDesigns.DistanceBased" href="#CEEDesigns.GenerativeDesigns.DistanceBased"><code>CEEDesigns.GenerativeDesigns.DistanceBased</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">DistanceBased(data; target, uncertainty=Entropy(), similarity=Exponential(), distance=Dict(); prior=ones(nrow(data)))</code></pre><p>Compute distances between experimental evidence and historical readouts, and apply a &#39;similarity&#39; functional to obtain probability mass for each row.</p><p>Consider using <a href="api.html#CEEDesigns.GenerativeDesigns.QuadraticDistance"><code>QuadraticDistance</code></a>, <a href="api.html#CEEDesigns.GenerativeDesigns.DiscreteDistance"><code>DiscreteDistance</code></a>, and <a href="api.html#CEEDesigns.GenerativeDesigns.SquaredMahalanobisDistance"><code>SquaredMahalanobisDistance</code></a>.</p><p><strong>Return value</strong></p><p>A named tuple with the following fields:</p><ul><li><code>sampler</code>: a function of <code>(evidence, features, rng)</code>, in which <code>evidence</code> denotes the current experimental evidence, <code>features</code> represent the set of features we want to sample from, and <code>rng</code> is a random number generator; it returns a dictionary mapping the features to outcomes.</li><li><code>uncertainty</code>: a function of <code>evidence</code>; it returns the measure of variance or uncertainty about the target variable, conditioned on the experimental evidence acquired so far.</li><li><code>weights</code>: a function of <code>evidence</code>; it returns probabilities (posterior) acrss the rows in <code>data</code>.</li></ul><p><strong>Arguments</strong></p><ul><li><code>data</code>: a dataframe with historical data.</li><li><code>target</code>: target column name or a vector of target columns names.</li></ul><p><strong>Keyword Argumets</strong></p><ul><li><code>uncertainty</code>: a function that takes the subdataframe containing columns in targets along with prior, and returns an anonymous function taking a single argument (a probability vector over observations) and returns an uncertainty measure over targets.</li><li><code>similarity</code>: a function that, for each row, takes distances between <code>row[col]</code> and <code>readout[col]</code>, and returns a non-negative probability mass for the row.</li><li><code>distance</code>: a dictionary of pairs <code>colname =&gt; similarity functional</code>, where a similarity functional must implement the signature <code>(readout, col; prior)</code>. Defaults to <a href="api.html#CEEDesigns.GenerativeDesigns.QuadraticDistance"><code>QuadraticDistance</code></a> and <a href="api.html#CEEDesigns.GenerativeDesigns.DiscreteDistance"><code>DiscreteDistance</code></a> for <code>Continuous</code> and <code>Multiclass</code> scitypes, respectively.</li><li><code>prior</code>: prior across rows, uniform by default.</li><li><code>filter_range</code>: a dictionary of pairs <code>colname =&gt; (lower bound, upper bound)</code>. If there&#39;s data in the current state for a specific column specified in this list, only historical observations within the defined range for that column are considered.</li><li><code>importance_weights</code>: a dictionary of pairs <code>colname</code> with either <code>weights</code> or a function <code>x -&gt; weight</code>, which will be applied to each element of the column to obtain the vector of weights. If data for a given column is available in the current state, the product of the corresponding weights is used to adjust the similarity vector.</li></ul><p><strong>Example</strong></p><pre><code class="language-julia hljs">(; sampler, uncertainty, weights) = DistanceBased(
    data;
    target = &quot;HeartDisease&quot;,
    uncertainty = Entropy(),
    similarity = Exponential(; λ = 5),
);</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/GenerativeDesigns/distancebased.jl#L161-L200">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.GenerativeDesigns.QuadraticDistance" href="#CEEDesigns.GenerativeDesigns.QuadraticDistance"><code>CEEDesigns.GenerativeDesigns.QuadraticDistance</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">QuadraticDistance(; λ=1, standardize=true)</code></pre><p>This returns an anonymous function <code>(x, col; prior) -&gt; λ * (x .- col).^2 / σ</code>. If <code>standardize</code> is set to <code>true</code>, <code>σ</code> represents <code>col</code>&#39;s variance calculated in relation to <code>prior</code>, otherwise <code>σ</code> equals one.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/GenerativeDesigns/distancebased.jl#L2-L7">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.GenerativeDesigns.DiscreteDistance" href="#CEEDesigns.GenerativeDesigns.DiscreteDistance"><code>CEEDesigns.GenerativeDesigns.DiscreteDistance</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">DiscreteDistance(; λ=1)</code></pre><p>Return an anonymous function <code>(x, col) -&gt; λ * (x .== col)</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/GenerativeDesigns/distancebased.jl#L20-L24">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.GenerativeDesigns.SquaredMahalanobisDistance" href="#CEEDesigns.GenerativeDesigns.SquaredMahalanobisDistance"><code>CEEDesigns.GenerativeDesigns.SquaredMahalanobisDistance</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">SquaredMahalanobisDistance(; diagonal=0)</code></pre><p>Returns a function that computes <a href="https://en.wikipedia.org/wiki/Mahalanobis_distance">squared Mahalanobis distance</a> between each row of <code>data</code> and the evidence. For a singular covariance matrix, consider adding entries to the matrix&#39;s diagonal via the <code>diagonal</code> keyword.</p><p>To accommodate missing values, we have implemented an approach described in https://www.jstor.org/stable/3559861, on page 285.</p><p><strong>Arguments</strong></p><ul><li><code>diagonal</code>: A scalar to be added to the diagonal entries of the covariance matrix.</li></ul><p><strong>Returns</strong></p><p>It returns a high-level function of <code>(data, targets, prior)</code>. When called, that function will return an internal function <code>compute_distances</code> that takes an <code>Evidence</code> and computes the squared Mahalanobis distance based on the input data and the evidence.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/GenerativeDesigns/distancebased.jl#L99-L115">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.GenerativeDesigns.Exponential" href="#CEEDesigns.GenerativeDesigns.Exponential"><code>CEEDesigns.GenerativeDesigns.Exponential</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">Exponential(; λ=1)</code></pre><p>Return an anonymous function <code>x -&gt; exp(-λ * sum(x; init=0))</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/GenerativeDesigns/distancebased.jl#L30-L34">source</a></section></article><h2 id="Plotting"><a class="docs-heading-anchor" href="#Plotting">Plotting</a><a id="Plotting-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.plot_front" href="#CEEDesigns.plot_front"><code>CEEDesigns.plot_front</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">plot_front(designs; grad=cgrad(:Paired_12), xlabel, ylabel, labels=get_labels(designs))</code></pre><p>Render scatter plot of efficient designs, as returned from <code>efficient_designs</code>.</p><p>You may optionally specify a color gradient, to draw the colors from.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">designs = efficient_designs(experiment, state)
plot_front(designs)
plot_front(designs; grad = cgrad(:Paired_12))</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/fronts.jl#L72-L86">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.make_labels" href="#CEEDesigns.make_labels"><code>CEEDesigns.make_labels</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">make_labels(designs)</code></pre><p>Make labels used plotting of experimental designs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/fronts.jl#L114-L118">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CEEDesigns.plot_evals" href="#CEEDesigns.plot_evals"><code>CEEDesigns.plot_evals</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">plot_evals(evals; f, ylabel=&quot;information measure&quot;)</code></pre><p>Create a stick plot that visualizes the performance measures evaluated for subsets of experiments.</p><p>Argument <code>evals</code> should be the output of <a href="api.html#CEEDesigns.StaticDesigns.evaluate_experiments"><code>evaluate_experiments</code></a> and the kwarg <code>f</code> (if provided) is a function that should take as input <code>evals</code> and return a list of its keys in the order to be plotted on the x-axis. By default they are sorted by length.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Merck/CEEDesigns.jl/blob/34588ae0e5563cb93f6818e3a9c8b3a77c5e3c47/src/fronts.jl#L132-L140">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="tutorials/ActiveSampling.html">« Active Sampling for Generative Designs</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Friday 8 December 2023 02:16">Friday 8 December 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
